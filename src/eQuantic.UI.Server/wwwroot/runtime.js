class Component{id;className;style;styleClass;title;hidden;tabIndex;dataAttributes;ariaAttributes;children=[];constructor(props){if(props&&typeof props==="object")Object.assign(this,props)}onClick;onDoubleClick;onFocus;onBlur;onMouseEnter;onMouseLeave;onMouseDown;onMouseUp;onKeyDown;onKeyUp;onKeyPress;onChange;onInput;onSubmit;buildAttributes(){let attrs={};if(this.id)attrs.id=this.id;if(this.title)attrs.title=this.title;if(this.hidden)attrs.hidden="true";if(this.tabIndex!==void 0)attrs.tabindex=this.tabIndex.toString();let classNames=[];if(this.className)classNames.push(this.className);if(this.styleClass)classNames.push(this.styleClass.generatedClassName);if(classNames.length>0)attrs.class=classNames.join(" ");if(this.style)attrs.style=Object.entries(this.style).map(([k,v])=>`${k}: ${v}`).join("; ");if(this.dataAttributes)for(let[key,value]of Object.entries(this.dataAttributes))attrs[`data-${key}`]=value;if(this.ariaAttributes)for(let[key,value]of Object.entries(this.ariaAttributes))attrs[`aria-${key}`]=value;return attrs}buildEvents(){let events={};for(let prop of Object.keys(this))if(prop.startsWith("on")&&prop.length>2){let eventName=prop.substring(2).toLowerCase(),handler=this[prop];if(handler&&typeof handler==="function")events[eventName]=handler}return events}}class HtmlElement extends Component{get htmlNode(){return{text:(content)=>{return this.content=content,this.htmlNode},attr:(name,value)=>{if(!this.attributes)this.attributes={};return this.attributes[name]=value,this.htmlNode}}}}class Reconciler{eventListeners=new WeakMap;reconcile(parentElement,oldNode,newNode,index=0){let currentElement=parentElement.childNodes[index];if(!oldNode&&newNode){let newElement=this.createDomElement(newNode);if(currentElement)parentElement.insertBefore(newElement,currentElement);else parentElement.appendChild(newElement);return}if(!newNode){if(currentElement)this.cleanupEventListeners(currentElement),parentElement.removeChild(currentElement);return}if(!oldNode||!newNode)return;if(this.isDifferentNodeType(oldNode,newNode)){let newElement=this.createDomElement(newNode);if(currentElement)this.cleanupEventListeners(currentElement),parentElement.replaceChild(newElement,currentElement);else parentElement.appendChild(newElement);return}if(currentElement){if(newNode.tag==="#text"){if(oldNode.textContent!==newNode.textContent)currentElement.textContent=newNode.textContent||"";return}if(newNode.tag==="#comment"){let text=newNode.attributes?.text||"";if(currentElement instanceof Comment){if(currentElement.textContent!==text)currentElement.textContent=text}return}if(currentElement instanceof HTMLElement)this.updateAttributes(currentElement,oldNode.attributes||{},newNode.attributes||{}),this.updateEventListeners(currentElement,oldNode.events||{},newNode.events||{}),this.reconcileChildren(currentElement,oldNode.children||[],newNode.children||[])}}isDifferentNodeType(oldNode,newNode){return oldNode.tag!==newNode.tag||oldNode.key!==newNode.key}createDomElement(node){if(node.tag==="#text")return document.createTextNode(node.textContent||"");if(node.tag==="#comment")return document.createComment(node.attributes?.text||"");let element=document.createElement(node.tag);if(node.attributes){for(let[key,value]of Object.entries(node.attributes))if(value!==void 0&&value!==null)this.applyAttribute(element,key,value)}if(node.events)this.attachEventListeners(element,node.events);for(let child of node.children||[])element.appendChild(this.createDomElement(child));return element}applyAttribute(element,key,value){if(value===void 0||value===null){if(element.removeAttribute(key),key==="value"&&(element instanceof HTMLInputElement||element instanceof HTMLTextAreaElement))element.value="";if(key==="checked"&&element instanceof HTMLInputElement)element.checked=!1;return}let strValue=String(value);if(element.setAttribute(key,strValue),key==="value"&&(element instanceof HTMLInputElement||element instanceof HTMLTextAreaElement))element.value=strValue;else if(key==="checked"&&element instanceof HTMLInputElement)element.checked=!0}updateAttributes(element,oldAttrs,newAttrs){for(let key of Object.keys(oldAttrs))if(!(key in newAttrs))this.applyAttribute(element,key,null);for(let[key,value]of Object.entries(newAttrs)){let oldValue=oldAttrs[key];if(value!==oldValue)this.applyAttribute(element,key,value)}}attachEventListeners(element,events){let elementListeners=new Map;for(let[eventName,handler]of Object.entries(events)){if(!handler)continue;let wrappedHandler=this.createEventHandler(eventName,handler);element.addEventListener(eventName,wrappedHandler),elementListeners.set(eventName,wrappedHandler)}if(elementListeners.size>0)this.eventListeners.set(element,elementListeners)}updateEventListeners(element,oldEvents,newEvents){let elementListeners=this.eventListeners.get(element)||new Map;for(let eventName of Object.keys(oldEvents))if(!(eventName in newEvents)){let wrapped=elementListeners.get(eventName);if(wrapped)element.removeEventListener(eventName,wrapped),elementListeners.delete(eventName)}for(let[eventName,handler]of Object.entries(newEvents)){let oldHandler=oldEvents[eventName];if(handler!==oldHandler){let oldWrapped=elementListeners.get(eventName);if(oldWrapped)element.removeEventListener(eventName,oldWrapped),elementListeners.delete(eventName);if(handler){let wrappedHandler=this.createEventHandler(eventName,handler);element.addEventListener(eventName,wrappedHandler),elementListeners.set(eventName,wrappedHandler)}}}if(elementListeners.size>0)this.eventListeners.set(element,elementListeners);else this.eventListeners.delete(element)}createEventHandler(eventName,handler){return(e)=>{if(eventName==="change"||eventName==="input"){let value=this.extractEventValue(e);handler(value);return}if(eventName==="click"||eventName==="submit"){handler();return}handler(e)}}extractEventValue(e){let target=e.target;if(target instanceof HTMLInputElement){if(target.type==="checkbox")return target.checked;if(target.type==="number")return target.valueAsNumber;if(target.type==="file")return target.files;return target.value}if(target instanceof HTMLTextAreaElement)return target.value;if(target instanceof HTMLSelectElement){if(target.multiple)return Array.from(target.selectedOptions).map((opt)=>opt.value);return target.value}return target.value}reconcileChildren(parentElement,oldChildren,newChildren){let oldCh=oldChildren||[],newCh=newChildren||[],oldStartIdx=0,newStartIdx=0,oldEndIdx=oldCh.length-1,newEndIdx=newCh.length-1,oldStartNode=oldCh[0],newStartNode=newCh[0],oldEndNode=oldCh[oldEndIdx],newEndNode=newCh[newEndIdx],childNodes=parentElement.childNodes;while(oldStartIdx<=oldEndIdx&&newStartIdx<=newEndIdx){if(!this.isSameKey(oldStartNode,newStartNode))break;this.reconcile(parentElement,oldStartNode,newStartNode,oldStartIdx),oldStartNode=oldCh[++oldStartIdx],newStartNode=newCh[++newStartIdx]}while(oldStartIdx<=oldEndIdx&&newStartIdx<=newEndIdx){if(!this.isSameKey(oldEndNode,newEndNode))break;this.reconcile(parentElement,oldEndNode,newEndNode,oldEndIdx),oldEndNode=oldCh[--oldEndIdx],newEndNode=newCh[--newEndIdx]}if(oldStartIdx>oldEndIdx){if(newStartIdx<=newEndIdx){let anchorIndex=oldEndIdx+1,anchor=anchorIndex<childNodes.length?childNodes[anchorIndex]:null;while(newStartIdx<=newEndIdx){let newNode=newCh[newStartIdx++],dom=this.createDomElement(newNode);parentElement.insertBefore(dom,anchor)}}}else if(newStartIdx>newEndIdx)while(oldStartIdx<=oldEndIdx){let nodeToRemove=childNodes[oldEndIdx];if(nodeToRemove)this.cleanupEventListeners(nodeToRemove),parentElement.removeChild(nodeToRemove);oldEndIdx--}else{let s2=newEndIdx-newStartIdx+1,keyMap=new Map;for(let i=newStartIdx;i<=newEndIdx;i++){let key=newCh[i].key;if(key!=null)keyMap.set(key,i)}let newIndexToOldIndexMap=new Int32Array(s2),newIndexToNodeMap=new Map,moved=!1,maxNewIndexSoFar=0,toRemove=[];for(let i=oldStartIdx;i<=oldEndIdx;i++){let oldNode=oldCh[i],newIndex;if(oldNode.key!=null)newIndex=keyMap.get(oldNode.key);else for(let j=0;j<s2;j++)if(newIndexToOldIndexMap[j]===0&&newCh[newStartIdx+j].key==null){newIndex=newStartIdx+j;break}if(newIndex!==void 0){if(newIndexToOldIndexMap[newIndex-newStartIdx]=i+1,newIndex>=maxNewIndexSoFar)maxNewIndexSoFar=newIndex;else moved=!0;let domNode=childNodes[i];newIndexToNodeMap.set(newIndex,domNode),this.reconcile(parentElement,oldNode,newCh[newIndex],i)}else{let node=childNodes[i];if(node)toRemove.push(node)}}for(let node of toRemove)this.cleanupEventListeners(node),parentElement.removeChild(node);if(moved){let seq=this.getSequence(newIndexToOldIndexMap),j=seq.length-1,nextAnchor=null;if(newEndIdx+1<newCh.length){let suffixCount=newCh.length-1-newEndIdx;if(suffixCount>0)nextAnchor=childNodes[childNodes.length-suffixCount]}for(let i=s2-1;i>=0;i--){let currentNewIndex=newStartIdx+i;if(newIndexToOldIndexMap[i]===0){let newNode=newCh[currentNewIndex],dom=this.createDomElement(newNode);parentElement.insertBefore(dom,nextAnchor),newIndexToNodeMap.set(currentNewIndex,dom),nextAnchor=dom}else{let dom=newIndexToNodeMap.get(currentNewIndex);if(dom){if(j<0||i!==seq[j])parentElement.insertBefore(dom,nextAnchor);else j--;nextAnchor=dom}}}}else{let nextAnchor=null,suffixCount=newCh.length-1-newEndIdx;if(suffixCount>0)nextAnchor=childNodes[childNodes.length-suffixCount];for(let i=s2-1;i>=0;i--){let currentNewIndex=newStartIdx+i;if(newIndexToOldIndexMap[i]===0){let newNode=newCh[currentNewIndex],dom=this.createDomElement(newNode);parentElement.insertBefore(dom,nextAnchor),nextAnchor=dom}else{let dom=newIndexToNodeMap.get(currentNewIndex);if(dom)nextAnchor=dom}}}}}isSameKey(n1,n2){return n1.tag===n2.tag&&n1.key===n2.key}getSequence(arr){let p=arr.slice(),result=[0],i,j,u,v,c,len=arr.length;for(i=0;i<len;i++){let arrI=arr[i];if(arrI!==0){if(j=result[result.length-1],arr[j]<arrI){p[i]=j,result.push(i);continue}u=0,v=result.length-1;while(u<v)if(c=(u+v)/2|0,arr[result[c]]<arrI)u=c+1;else v=c;if(arrI<arr[result[u]]){if(u>0)p[i]=result[u-1];result[u]=i}}}u=result.length,v=result[u-1];while(u-- >0)result[u]=v,v=p[v];return result}cleanupEventListeners(node){if(node instanceof HTMLElement){let elementListeners=this.eventListeners.get(node);if(elementListeners){for(let[eventName,handler]of elementListeners.entries())node.removeEventListener(eventName,handler);this.eventListeners.delete(node)}for(let i=0;i<node.childNodes.length;i++)this.cleanupEventListeners(node.childNodes[i])}}hydrate(existingElement,virtualNode,result={success:!0,attachedListeners:0,warnings:[]}){if(virtualNode.tag==="#text"){if(existingElement.nodeType!==Node.TEXT_NODE)result.warnings.push(`Expected text node, found ${existingElement.nodeName}`),result.success=!1;return result}if(virtualNode.tag==="#comment")return result;if(!(existingElement instanceof HTMLElement))return result.warnings.push(`Expected HTMLElement for tag '${virtualNode.tag}', found ${existingElement.nodeName}`),result.success=!1,result;if(existingElement.tagName.toLowerCase()!==virtualNode.tag.toLowerCase())return result.warnings.push(`Tag mismatch: expected '${virtualNode.tag}', found '${existingElement.tagName.toLowerCase()}'`),result.success=!1,result;if(virtualNode.events)this.attachEventListeners(existingElement,virtualNode.events),result.attachedListeners+=Object.keys(virtualNode.events).length;let virtualChildren=virtualNode.children||[],existingChildren=Array.from(existingElement.childNodes).filter((node)=>node.nodeType===Node.ELEMENT_NODE||node.nodeType===Node.TEXT_NODE&&node.textContent?.trim());for(let i=0;i<virtualChildren.length;i++){let virtualChild=virtualChildren[i],existingChild=existingChildren[i];if(!existingChild){result.warnings.push(`Missing child at index ${i} for tag '${virtualNode.tag}'`),result.success=!1;continue}this.hydrate(existingChild,virtualChild,result)}return result}hydrateRoot(container,virtualNode){let result={success:!0,attachedListeners:0,warnings:[]},existingRoot=container.firstElementChild;if(!existingRoot)return result.warnings.push("No existing element to hydrate"),result.success=!1,result;return this.hydrate(existingRoot,virtualNode,result)}dispose(){this.eventListeners=new WeakMap}getEventListenerCount(){return-1}}var globalReconciler=null;function getReconciler(){if(!globalReconciler)globalReconciler=new Reconciler;return globalReconciler}function resetReconciler(){if(globalReconciler)globalReconciler.dispose();globalReconciler=null}class RenderManager{previousVirtualDom=null;container=null;mount(node,container){this.container=container,this.previousVirtualDom=node;let dom=getReconciler().createDomElement(node);container.innerHTML="",container.appendChild(dom)}update(newNode){if(!this.container)throw Error("Cannot update before mounting");let reconciler=getReconciler();if(this.previousVirtualDom)reconciler.reconcile(this.container,this.previousVirtualDom,newNode,0);else{let dom=reconciler.createDomElement(newNode);this.container.appendChild(dom)}this.previousVirtualDom=newNode}unmount(){if(this.container){let reconciler=getReconciler();while(this.container.firstChild)reconciler.reconcile(this.container,this.previousVirtualDom,null,0);this.previousVirtualDom=null,this.container=null}}getContainer(){return this.container}hydrate(node,container){this.container=container,this.previousVirtualDom=node;let result=getReconciler().hydrateRoot(container,node);if(!result.success)return console.warn("[eQuantic.UI] Hydration warnings:",result.warnings),console.warn("[eQuantic.UI] Falling back to full re-render"),this.mount(node,container),{success:!1,attachedListeners:0,warnings:[...result.warnings,"Fell back to full re-render"]};return result}canHydrate(container){return container.dataset.ssr==="true"&&container.firstElementChild!==null}}var ServiceLifetime;((ServiceLifetime2)=>{ServiceLifetime2.Transient="transient";ServiceLifetime2.Singleton="singleton";ServiceLifetime2.Scoped="scoped"})(ServiceLifetime||={});class ServiceProvider{services=new Map;scopedInstances=new Map;parent=null;constructor(parent){this.parent=parent||null}registerSingleton(key,factory){return this.services.set(key,{factory,lifetime:"singleton"}),this}registerTransient(key,factory){return this.services.set(key,{factory,lifetime:"transient"}),this}registerScoped(key,factory){return this.services.set(key,{factory,lifetime:"scoped"}),this}registerInstance(key,instance){return this.services.set(key,{factory:()=>instance,lifetime:"singleton",instance}),this}getService(key){let descriptor=this.services.get(key);if(descriptor)return this.resolveService(key,descriptor);if(this.parent)return this.parent.getService(key);return}getRequiredService(key){let service=this.getService(key);if(service===void 0){let keyName=typeof key==="string"?key:key.name||"Unknown";throw Error(`Required service not found: ${keyName}`)}return service}hasService(key){return this.services.has(key)||(this.parent?.hasService(key)??!1)}createScope(){return new ServiceProvider(this)}dispose(){for(let instance of this.scopedInstances.values())if(instance&&typeof instance.dispose==="function")instance.dispose();this.scopedInstances.clear()}resolveService(key,descriptor){switch(descriptor.lifetime){case"singleton":if(!descriptor.instance)descriptor.instance=descriptor.factory();return descriptor.instance;case"scoped":if(!this.scopedInstances.has(key))this.scopedInstances.set(key,descriptor.factory());return this.scopedInstances.get(key);case"transient":default:return descriptor.factory()}}getRegisteredServices(){let keys=Array.from(this.services.keys());if(this.parent)keys.push(...this.parent.getRegisteredServices());return Array.from(new Set(keys))}}var rootServiceProvider=null;function getRootServiceProvider(){if(!rootServiceProvider)rootServiceProvider=new ServiceProvider;return rootServiceProvider}function configureServices(configure){let services=getRootServiceProvider();configure(services)}function resetServiceProvider(){if(rootServiceProvider)rootServiceProvider.dispose();rootServiceProvider=null}if(typeof window<"u")window.getRootServiceProvider=getRootServiceProvider;class ServiceCollectionBuilder{provider=new ServiceProvider;singleton(key,factory){return this.provider.registerSingleton(key,factory),this}transient(key,factory){return this.provider.registerTransient(key,factory),this}scoped(key,factory){return this.provider.registerScoped(key,factory),this}instance(key,instance){return this.provider.registerInstance(key,instance),this}build(){return this.provider}}class StatelessComponent extends Component{serviceProvider=getRootServiceProvider();render(){let context={getService:(key)=>this.serviceProvider.getService(key),serviceProvider:this.serviceProvider};return this.build(context).render()}}class StatefulComponent extends Component{_state=null;_mounted=!1;_renderScheduled=!1;_renderManager=new RenderManager;serviceProvider=getRootServiceProvider();get state(){if(!this._state){if(typeof this.createState!=="function")throw Error(`Component ${this.constructor.name} does not implement createState()`);if(this._state=this.createState(),!this._state)throw Error(`createState() returned null/undefined for ${this.constructor.name}`);if(typeof this._state.setComponent==="function")this._state.setComponent(this);else if(console.warn(`State object for ${this.constructor.name} missing setComponent method.`,this._state),typeof this._state._setComponent==="function")this._state._setComponent(this);if(typeof window<"u"&&window.__INITIAL_STATE__){let initialState=window.__INITIAL_STATE__;Object.assign(this._state,initialState),delete window.__INITIAL_STATE__}this._state.onInit()}return this._state}render(){let context={getService:(key)=>this.serviceProvider.getService(key),serviceProvider:this.serviceProvider};return this.state._context=context,this.state.build(context).render()}mount(container){let node=this.render();if(this._renderManager.canHydrate(container)){let result=this._renderManager.hydrate(node,container);if(result.success)console.debug(`[eQuantic.UI] Hydrated ${this.constructor.name} with ${result.attachedListeners} event listeners`)}else this._renderManager.mount(node,container);this._mounted=!0,this.state.onMount()}_scheduleRender(){if(this._renderScheduled)return;this._renderScheduled=!0,requestAnimationFrame(()=>{if(this._renderScheduled=!1,this._mounted){let node=this.render();this._renderManager.update(node),this.state.onUpdate()}})}unmount(){if(this._mounted&&this._state)this._state.onDispose(),this._renderManager.unmount(),this._mounted=!1}}class ComponentState{_component=null;_context=null;_needsRender=!1;get component(){if(!this._component)throw Error("State not initialized");return this._component}setComponent(component){this._component=component}setState(fn){fn(),this._needsRender=!0,this.component._scheduleRender()}onInit(){}onMount(){}onUpdate(){}onDispose(){}}class HtmlStyle{display;position;top;right;bottom;left;zIndex;flexDirection;flexWrap;justifyContent;alignItems;alignContent;gap;flex;flexGrow;flexShrink;gridTemplateColumns;gridTemplateRows;gridColumn;gridRow;gridAutoFlow;justifyItems;width;height;minWidth;minHeight;maxWidth;maxHeight;margin;marginTop;marginRight;marginBottom;marginLeft;padding;paddingTop;paddingRight;paddingBottom;paddingLeft;background;backgroundColor;backgroundImage;border;borderWidth;borderStyle;borderColor;borderRadius;color;fontFamily;fontSize;fontWeight;fontStyle;lineHeight;textAlign;textDecoration;textTransform;letterSpacing;boxShadow;opacity;cursor;overflow;overflowX;overflowY;transition;transform;constructor(init){if(init)Object.assign(this,init)}toCssString(){let properties=[],cssMap={display:"display",position:"position",top:"top",right:"right",bottom:"bottom",left:"left",zIndex:"z-index",flexDirection:"flex-direction",flexWrap:"flex-wrap",justifyContent:"justify-content",alignItems:"align-items",alignContent:"align-content",gap:"gap",flex:"flex",flexGrow:"flex-grow",flexShrink:"flex-shrink",gridTemplateColumns:"grid-template-columns",gridTemplateRows:"grid-template-rows",gridColumn:"grid-column",gridRow:"grid-row",gridAutoFlow:"grid-auto-flow",justifyItems:"justify-items",width:"width",height:"height",minWidth:"min-width",minHeight:"min-height",maxWidth:"max-width",maxHeight:"max-height",margin:"margin",marginTop:"margin-top",marginRight:"margin-right",marginBottom:"margin-bottom",marginLeft:"margin-left",padding:"padding",paddingTop:"padding-top",paddingRight:"padding-right",paddingBottom:"padding-bottom",paddingLeft:"padding-left",background:"background",backgroundColor:"background-color",backgroundImage:"background-image",border:"border",borderWidth:"border-width",borderStyle:"border-style",borderColor:"border-color",borderRadius:"border-radius",color:"color",fontFamily:"font-family",fontSize:"font-size",fontWeight:"font-weight",fontStyle:"font-style",lineHeight:"line-height",textAlign:"text-align",textDecoration:"text-decoration",textTransform:"text-transform",letterSpacing:"letter-spacing",boxShadow:"box-shadow",opacity:"opacity",cursor:"cursor",overflow:"overflow",overflowX:"overflow-x",overflowY:"overflow-y",transition:"transition",transform:"transform"};for(let[key,cssName]of Object.entries(cssMap)){let value=this[key];if(value!==void 0&&value!==null)properties.push(`${cssName}: ${value}`)}return properties.join("; ")}}class ServerActionsClient{baseUrl;constructor(baseUrl="/api/_equantic/actions"){this.baseUrl=baseUrl}async invoke(actionId,args=[]){let data=await(await fetch(this.baseUrl,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({actionId,arguments:args})})).json();if(!data.success)throw Error(data.error||`Server action failed: ${actionId}`);return data.result}}var globalServerActionsClient=null;function getServerActionsClient(){if(!globalServerActionsClient)globalServerActionsClient=new ServerActionsClient;return globalServerActionsClient}function configureServerActions(baseUrl){globalServerActionsClient=new ServerActionsClient(baseUrl)}function resetServerActionsClient(){globalServerActionsClient=null}function format(value,format2,alignment){if(value===null||value===void 0)return"";let result=String(value);if(format2){if(typeof value==="number")result=formatNumber(value,format2);else if(value instanceof Date)result=formatDate(value,format2)}if(alignment){let width=Math.abs(alignment);if(result.length<width){let padding=" ".repeat(width-result.length);return alignment>0?padding+result:result+padding}}return result}function formatNumber(value,format2){let specifier=format2[0].toUpperCase(),precision=format2.length>1?parseInt(format2.slice(1)):2;switch(specifier){case"C":return value.toLocaleString(void 0,{style:"currency",currency:"USD",minimumFractionDigits:precision,maximumFractionDigits:precision});case"N":return value.toLocaleString(void 0,{minimumFractionDigits:precision,maximumFractionDigits:precision});case"P":return value.toLocaleString(void 0,{style:"percent",minimumFractionDigits:precision,maximumFractionDigits:precision});case"F":return value.toFixed(precision);case"D":return Math.round(value).toString().padStart(precision,"0");case"X":return Math.floor(value).toString(16).toUpperCase().padStart(precision,"0");default:return value.toString()}}function formatDate(value,format2){let yyyy=value.getFullYear().toString(),MM=(value.getMonth()+1).toString().padStart(2,"0"),dd=value.getDate().toString().padStart(2,"0"),HH=value.getHours().toString().padStart(2,"0"),mm=value.getMinutes().toString().padStart(2,"0"),ss=value.getSeconds().toString().padStart(2,"0");return format2.replace(/yyyy/g,yyyy).replace(/MM/g,MM).replace(/dd/g,dd).replace(/HH/g,HH).replace(/mm/g,mm).replace(/ss/g,ss)}function parseEnum(value,enumType){if(typeof value==="number")return enumType[value]!==void 0?enumType[value]:void 0;let strValue=String(value);if(enumType[strValue]!==void 0)return enumType[strValue];let matchedKey=Object.keys(enumType).find((k)=>k.toLowerCase()===strValue.toLowerCase());if(matchedKey)return enumType[matchedKey];let matchedValue=Object.values(enumType).find((v)=>String(v).toLowerCase()===strValue.toLowerCase());if(matchedValue!==void 0)return matchedValue;return}class StyleBuilder{classes=[];constructor(baseClass){if(baseClass)this.classes.push(baseClass)}static create(baseClass){return new StyleBuilder(baseClass)}add(className,condition=!0){if(condition&&className){let parts=className.split(" ").filter((c)=>c.trim().length>0);this.classes.push(...parts)}return this}push(className,condition=!0){return this.add(className,condition)}addVariant(key,lookup){let cls=lookup(key);if(cls)this.add(cls);return this}build(){return this.classes.join(" ")}toString(){return this.build()}}function mount(component,selector){let container=document.querySelector(selector);if(!container)throw Error(`Container not found: ${selector}`);component.mount(container)}function createApp(ComponentClass,selector){let component=new ComponentClass;return mount(component,selector),component}var APP_ROOT_ID="app",MODULE_PATH_PREFIX="/_equantic/";function isDev(){return typeof window<"u"&&window.__EQ_DEV__===!0}var initialized=!1;if(typeof window<"u")window.StyleBuilder=StyleBuilder;async function boot(){if(initialized)return;if(initialized=!0,isDev())console.log("eQuantic.UI Runtime initializing...");let root=document.getElementById(APP_ROOT_ID);if(!root){console.error(`Root element #${APP_ROOT_ID} not found`);return}try{let config=window.__EQ_CONFIG??{},pageName=resolvePageName(config);if(!pageName){renderNoPage(root);return}await loadAndMountPage(root,pageName,config)}catch(error){renderError(root,error)}}function resolvePageName(config){if(config.page)return config.page;return new URLSearchParams(window.location.search).get("page")}async function loadAndMountPage(root,pageName,config){let hasSSRContent=root.children.length>0;if(!hasSSRContent)root.innerHTML='<div class="eq-loading">Loading...</div>';let cacheBuster=config.version?`?v=${config.version}`:"",modulePath=`${MODULE_PATH_PREFIX}${pageName}.js${cacheBuster}`;if(isDev())console.log(`Loading module: ${modulePath}`);let module;try{module=await import(modulePath)}catch{render404(root,pageName);return}let ComponentClass=module[pageName];if(!ComponentClass)throw Error(`Module '${pageName}' does not export class '${pageName}'`);let component=new ComponentClass;if(hasSSRContent&&config.ssr!==!1&&component.getVirtualNode){if(isDev())console.log(`Hydrating: ${pageName}`);let reconciler=getReconciler(),virtualNode=component.getVirtualNode(),result=reconciler.hydrateRoot(root,virtualNode);if(!result.success&&isDev())console.warn("Hydration warnings:",result.warnings);return}if(root.innerHTML="",typeof component.mount==="function")component.mount(root);else if(typeof component.render==="function")component.render(root);else renderMountError(root,pageName);if(isDev())console.log(`Mounted: ${pageName}`)}function renderNoPage(root){if(window.location.pathname==="/"||window.location.pathname==="")root.innerHTML=`
      <div class="eq-welcome">
        <h1>Welcome to eQuantic.UI</h1>
        <p>No default page configured.</p>
      </div>
    `;else render404(root,window.location.pathname)}function render404(root,resource){root.innerHTML=`
    <div class="eq-error-page">
      <h1 class="eq-error-code">404</h1>
      <h2>Page Not Found</h2>
      <p>The resource '<strong>${escapeHtml(resource)}</strong>' does not exist.</p>
      <a href="/" class="eq-btn">Go Home</a>
    </div>
  `}function renderError(root,error){console.error("Runtime Error:",error),root.innerHTML=`
    <div class="eq-error-page eq-error-page--critical">
      <h2>Application Error</h2>
      <pre>${escapeHtml(error.message)}</pre>
    </div>
  `}function renderMountError(root,pageName){root.innerHTML=`
    <div class="eq-error-page eq-error-page--warning">
      <h2>Loaded: ${escapeHtml(pageName)}</h2>
      <p>Component created but no <code>mount()</code> or <code>render()</code> method found.</p>
    </div>
  `}function escapeHtml(unsafe){return unsafe.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}export{resetServiceProvider,resetServerActionsClient,resetReconciler,parseEnum,mount,getServerActionsClient,getRootServiceProvider,getReconciler,format,createApp,configureServices,configureServerActions,boot,StyleBuilder,StatelessComponent,StatefulComponent,ServiceProvider,ServiceLifetime,ServiceCollectionBuilder,ServerActionsClient,RenderManager,Reconciler,HtmlStyle,HtmlElement,ComponentState,Component};

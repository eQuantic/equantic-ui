import{ComponentState,getServerActionsClient,StatefulComponent}from"@equantic/runtime";import{StatelessComponent}from"@equantic/runtime";import{HtmlElement,HtmlStyle}from"@equantic/runtime";class Flex extends HtmlElement{render(){let s,attrs=this.buildAttributes(),layoutStyle=new HtmlStyle({display:"flex",flexDirection:this.direction,justifyContent:this.justify,alignItems:this.align,gap:this.gap,flexWrap:this.wrap?"wrap":"noWrap"}),existingStyle=(s=attrs.style)!==void 0?s+"; ":"";return attrs.style=existingStyle+layoutStyle.toCssString(),{tag:"div",attributes:attrs,events:this.buildEvents(),children:this.children.map((c)=>c.render())}}}class Column extends Flex{constructor(props){super(props)}}import{HtmlElement as HtmlElement2}from"@equantic/runtime";class Container extends HtmlElement2{render(){let s,attrs=this.buildAttributes(),style=["margin-right: auto","margin-left: auto","padding-right: 15px","padding-left: 15px","width: 100%"];if(this.fluid);else if(!(!this.maxWidth||this.maxWidth===""))style.push(`max-width: ${this.maxWidth}`);else style.push("max-width: 1320px");let existingStyle=(s=attrs.style)!==void 0?s+"; ":"";return attrs.style=existingStyle+style.join("; "),{tag:"div",attributes:attrs,events:this.buildEvents(),children:this.children.map((c)=>c.render())}}}import{HtmlElement as HtmlElement3}from"@equantic/runtime";class Text extends HtmlElement3{constructor(content){super();this.content=content}render(){return{tag:this.paragraph?"p":"span",attributes:this.buildAttributes(),events:this.buildEvents(),children:[{tag:"#text",textContent:this.content}]}}}class Alert extends StatelessComponent{build(context){let[bgColor,textColor,borderColor]=this.type==="success"?["bg-green-50 dark:bg-green-900/20","text-green-800 dark:text-green-200","border-green-200 dark:border-green-800"]:this.type==="warning"?["bg-yellow-50 dark:bg-yellow-900/20","text-yellow-800 dark:text-yellow-200","border-yellow-200 dark:border-yellow-800"]:this.type==="error"?["bg-red-50 dark:bg-red-900/20","text-red-800 dark:text-red-200","border-red-200 dark:border-red-800"]:["bg-blue-50 dark:bg-blue-900/20","text-blue-800 dark:text-blue-200","border-blue-200 dark:border-blue-800"],content=new Column({gap:"4px"});if(!(!this.title||this.title===""))content.children.push(new Text(this.title,{className:"font-bold"}));if(!(!this.message||this.message===""))content.children.push(new Text(this.message,{className:"text-sm opacity-90"}));return new Container({className:`p-4 rounded-md border ${bgColor} ${textColor} ${borderColor} ${this.className}`,children:[content]})}}import{HtmlElement as HtmlElement5}from"@equantic/runtime";class Box extends HtmlElement5{render(){return{tag:"div",attributes:this.buildAttributes(),events:this.buildEvents(),children:this.children.map((c)=>c.render())}}}import{StatelessComponent as StatelessComponent2}from"@equantic/runtime";import{HtmlElement as HtmlElement6}from"@equantic/runtime";class DynamicElement extends HtmlElement6{render(){return{tag:this.tagName,attributes:this.customAttributes,events:this.customEvents,children:this.children.map((c)=>c.render())}}}class Button extends StatelessComponent2{build(context){let buttonTheme=context.getService("eQuantic.UI.Core.Theme.IAppTheme")?.Button,baseStyle=buttonTheme?.Base??"",variantStyle=buttonTheme?.GetVariant(Variant)??"",attrs={["type"]:this.type,["class"]:`${baseStyle} ${variantStyle} ${this.className}`};if(this.disabled)attrs.disabled="true";let element=new DynamicElement({tagName:"button",customAttributes:attrs,customEvents:this.buildEvents()});if(this.children.length>0)for(let child of this.children)element.children.push(child);else if(this.text!==null)element.children.push(new Text(this.text));return element}}import{StatelessComponent as StatelessComponent3}from"@equantic/runtime";class Card extends StatelessComponent3{build(context){let cardTheme=context.getService("eQuantic.UI.Core.Theme.IAppTheme")?.Card,shadowClass=cardTheme?.GetShadowInfo(Shadow.ToString().ToLower())??"",containerClass=cardTheme?.Container??"",headerClass=cardTheme?.Header??"",bodyClass=cardTheme?.Body??"",footerClass=cardTheme?.Footer??"",cardContainer=new Box({className:`${containerClass} ${shadowClass} ${this.width} ${this.className}`,children:[]});if(this.header!==null)cardContainer.children.push(new Box({className:headerClass,children:[this.header]}));if(cardContainer.children.push(new Box({className:bodyClass,children:[this.body??new Text("")]})),this.footer!==null)cardContainer.children.push(new Box({className:footerClass,children:[this.footer]}));return cardContainer}}import{HtmlElement as HtmlElement9}from"@equantic/runtime";class Checkbox extends HtmlElement9{render(){let inputAttrs=this.buildAttributes();if(inputAttrs.type="checkbox",this.value)inputAttrs.checked="true";if(this.disabled)inputAttrs.disabled="true";let events=this.buildEvents();return{tag:"input",attributes:inputAttrs,events}}}import{StatelessComponent as StatelessComponent4}from"@equantic/runtime";import{HtmlElement as HtmlElement10}from"@equantic/runtime";class NullComponent extends HtmlElement10{render(){return{tag:"#comment",attributes:{text:"null"}}}}class Row extends Flex{constructor(props){super(props)}}class Drawer extends StatelessComponent4{build(context){if(!this.isOpen)return new NullComponent;let sideClass=this.side==="right"?"right-0 border-l":"left-0 border-r",slideAnim=this.side==="right"?"slide-in-from-right":"slide-in-from-left";return new Box({className:"fixed inset-0 z-50 z-[100]",children:[new Box({className:"absolute inset-0 bg-black/20 backdrop-blur-sm animate-in fade-in duration-300",onClick:()=>OnClose?.Invoke()}),new Box({className:`absolute inset-y-0 ${sideClass} ${this.width} bg-white dark:bg-zinc-900 shadow-2xl animate-in ${slideAnim} duration-300 border-gray-100 dark:border-zinc-800 flex flex-col`,onClick:()=>{},children:[new Row({className:"p-4 justify-end",children:[new Button({text:"✕",className:"p-2 text-gray-400 hover:text-gray-900 dark:hover:text-white rounded-full hover:bg-gray-100 dark:hover:bg-zinc-800",onClick:()=>OnClose?.Invoke()})]}),new Box({className:"flex-1 overflow-y-auto p-4",children:[this.content??new NullComponent]})]})]})}}import{HtmlElement as HtmlElement12}from"@equantic/runtime";class Heading extends HtmlElement12{constructor(content,level){super();this.content=content,this.level=level}render(){return{tag:`h${Math.min(Math.max(this.level,1),6)}`,attributes:this.buildAttributes(),events:this.buildEvents(),children:[{tag:"#text",textContent:this.content}]}}}import{StatelessComponent as StatelessComponent5}from"@equantic/runtime";class Modal extends StatelessComponent5{build(context){if(!this.isOpen)return new NullComponent;return new Box({className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm animate-in fade-in duration-200",onClick:()=>OnClose?.Invoke(),children:[new Box({className:`bg-white dark:bg-zinc-800 rounded-xl shadow-2xl overflow-hidden ${this.width} animate-in zoom-in-95 duration-200`,onClick:()=>{},children:[new Row({className:"px-6 py-4 border-b border-gray-100 dark:border-zinc-700 items-center justify-between",children:[new Heading(this.title??"Modal",3,{className:"text-lg font-semibold text-gray-900 dark:text-white"}),new Button({text:"✕",className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-200",onClick:()=>OnClose?.Invoke()})]}),new Box({className:"p-6",children:[this.body??new NullComponent]}),this.footer!==null?new Box({className:"px-6 py-4 bg-gray-50 dark:bg-zinc-900/50 border-t border-gray-100 dark:border-zinc-700 flex justify-end gap-2",children:[this.footer]}):new NullComponent]})]})}}import{HtmlElement as HtmlElement14}from"@equantic/runtime";class TextInput extends HtmlElement14{render(){let attrs=this.buildAttributes();if(attrs.type=this.type,attrs.value=this.value,this.placeholder!==null)attrs.placeholder=this.placeholder;if(this.disabled)attrs.disabled="true";if(this.readOnly)attrs.readonly="true";if(this.required)attrs.required="true";if(this.name!==null)attrs.name=this.name;if(this.maxLength!=null)attrs.maxlength=this.maxLength.toString();if(this.autoComplete!==null)attrs.autocomplete=this.autoComplete;let events=this.buildEvents();return{tag:"input",attributes:attrs,events}}}class TodoList extends StatefulComponent{createState(){return new TodoListState(this)}async getTodos(){return await getServerActionsClient().invoke("TodoList/GetTodos",[])}async addTodo(title){return await getServerActionsClient().invoke("TodoList/AddTodo",[title])}async toggleTodo(id){return await getServerActionsClient().invoke("TodoList/ToggleTodo",[id])}async deleteTodo(id){return await getServerActionsClient().invoke("TodoList/DeleteTodo",[id])}async updateTodo(id,title){return await getServerActionsClient().invoke("TodoList/UpdateTodo",[id,title])}async clearCompleted(){return await getServerActionsClient().invoke("TodoList/ClearCompleted",[])}}class TodoListState extends ComponentState{_component;_needsRender=!1;_todos=[];_newTodoTitle="";_currentFilter="all";_isEditing=!1;_editingId=null;_editingTitle="";_isDrawerOpen=!1;constructor(component){super();this._component=component}setState(fn){fn(),this._needsRender=!0,this._component._scheduleRender()}onInit(){this.loadTodos()}async loadTodos(){this._todos=await this._component.getTodos(),this.setState(()=>{})}async handleAdd(){if(!this._newTodoTitle||this._newTodoTitle.trim()==="")return;await this._component.addTodo(this._newTodoTitle),this._newTodoTitle="",await this.loadTodos()}async handleToggle(id){await this._component.toggleTodo(id),await this.loadTodos()}async handleDelete(id){await this._component.deleteTodo(id),await this.loadTodos()}async handleClearCompleted(){await this._component.clearCompleted(),await this.loadTodos()}openEdit(todo){this.setState(()=>{this._isEditing=!0,this._editingId=todo.id,this._editingTitle=todo.title})}async saveEdit(){if(!this._editingTitle||this._editingTitle.trim()==="")return;await this._component.updateTodo(this._editingId,this._editingTitle),this.setState(()=>{this._isEditing=!1}),await this.loadTodos()}createFilterButton(filter,label){let isActive=this._currentFilter===filter;return new Button({text:label,variant:isActive?"primary":"ghost",className:"flex-1 px-3 py-1.5 text-xs font-semibold rounded-md transition-all "+(isActive?"shadow-sm":"hover:bg-gray-200 dark:hover:bg-zinc-700/50"),onClick:()=>{this.setState(()=>{this._currentFilter=filter})}})}build(context){let filteredTodos=this._currentFilter==="active"?this._todos.filter((t)=>!t.isCompleted):this._currentFilter==="completed"?this._todos.filter((t)=>t.isCompleted):this._todos,todoList=new Box({className:"flex flex-col gap-[5px]"});if(!(filteredTodos.length>0))todoList.children.push(new Box({className:"py-8 text-center",children:[new Text("No tasks found in this view.",{variant:"muted"})]}));else for(let todo of filteredTodos)todoList.children.push(new Box({className:"flex flex-row items-center p-2 border-b border-gray-100 dark:border-zinc-700 bg-white dark:bg-zinc-800 rounded transition-all hover:bg-gray-50 dark:hover:bg-zinc-700/50 group gap-[10px]",children:[new Checkbox({checked:todo.isCompleted,onChange:(_)=>{this.handleToggle(todo.id)}}),new Text(todo.title,{className:"flex-1 transition-all",variant:todo.isCompleted?"muted":"base"}),new Box({className:"flex flex-row gap-[4px] opacity-0 group-hover:opacity-100 transition-opacity",children:[new Button({text:"Edit",variant:"ghost",className:"px-2 py-1 text-xs text-blue-600 hover:text-blue-700",onClick:()=>{this.openEdit(todo)}}),new Button({text:"Delete",variant:"ghost",className:"px-2 py-1 text-xs text-red-600 hover:text-red-700",onClick:()=>{this.handleDelete(todo.id)}})]})]}));return new Box({className:"min-h-screen bg-gray-50 dark:bg-zinc-900 p-8 grid place-items-center",children:[new Box({className:"absolute top-4 right-4",children:[new Button({text:"⚙️ Settings",variant:"outline",className:"bg-white dark:bg-zinc-800 text-sm",onClick:()=>{this.setState(()=>{this._isDrawerOpen=!0})}})]}),new Card({width:"w-full max-w-md",shadow:"large",header:new Box({className:"w-full flex flex-col gap-[15px]",children:[new Box({className:"w-full flex flex-row items-center justify-between",children:[new Heading("Tasks",2),new Text(`${this._todos.filter((t)=>!t.isCompleted).length} remaining`,{variant:"muted"})]}),new Box({className:"flex flex-row gap-[8px] bg-gray-100/50 dark:bg-zinc-900/30 p-1 rounded-lg",children:[this.createFilterButton("all","All"),this.createFilterButton("active","Active"),this.createFilterButton("completed","Completed")]})]}),body:new Box({className:"flex flex-col gap-[20px]",children:[new Box({className:"flex flex-row gap-[10px]",children:[new TextInput({value:this._newTodoTitle,placeholder:"New task...",className:"flex-1",onInput:(val)=>{this.setState(()=>{this._newTodoTitle=val})}}),new Button({text:"Add",variant:"primary",onClick:()=>{this.handleAdd()}})]}),todoList]}),footer:this._todos.some((t)=>t.isCompleted)?new Box({className:"flex flex-row justify-center",children:[new Button({text:"Clear Completed",variant:"text",className:"text-xs uppercase font-semibold tracking-wider text-red-500 hover:text-red-700",onClick:()=>{this.handleClearCompleted()}})]}):null}),new Modal({isOpen:this._isEditing,title:"Edit Task",onClose:()=>{this.setState(()=>{this._isEditing=!1})},body:new Box({className:"flex flex-col gap-[10px]",children:[new Text("Update the task title:",{variant:"muted"}),new TextInput({value:this._editingTitle,onInput:(val)=>{this.setState(()=>{this._editingTitle=val})}})]}),footer:new Box({className:"flex flex-row gap-[10px]",children:[new Button({text:"Cancel",variant:"ghost",onClick:()=>{this.setState(()=>{this._isEditing=!1})}}),new Button({text:"Save Changes",variant:"primary",onClick:()=>{this.saveEdit()}})]})}),new Drawer({isOpen:this._isDrawerOpen,side:"right",onClose:()=>{this.setState(()=>{this._isDrawerOpen=!1})},content:new Box({className:"flex flex-col gap-[20px]",children:[new Heading("Settings",3,{className:"mb-4"}),new Text("Theme preferences and other settings will go here.",{variant:"muted"}),new Alert({type:"success",message:"eQuantic.UI is now running with Bun + Tailwind 4!"}),new Container({className:"mt-auto pt-8 border-t border-gray-100 dark:border-zinc-800",children:[new Button({text:"Back to List",variant:"secondary",className:"w-full",onClick:()=>{this.setState(()=>{this._isDrawerOpen=!1})}})]})]})})]})}}export{TodoListState,TodoList};

//# debugId=B4CA3C90ABBB389F64756E2164756E21
//# sourceMappingURL=TodoList.js.map

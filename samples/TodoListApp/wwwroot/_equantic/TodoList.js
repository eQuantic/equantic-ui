import{ComponentState,getServerActionsClient,StatefulComponent}from"@equantic/runtime";import{HtmlElement}from"@equantic/runtime";class Button extends HtmlElement{type;disabled;text;render(){let attrs=this.buildAttributes();if(attrs.type=this.type,this.disabled)attrs.disabled="true";let children=this.children.some()?this.children.map((c)=>c.render()):this.text!==null?[{tag:"#text",textContent:this.text}]:[];return{tag:"button",attributes:attrs,events:this.buildEvents(),children}}}import{HtmlElement as HtmlElement2}from"@equantic/runtime";class Checkbox extends HtmlElement2{checked;onChange;disabled;render(){let inputAttrs=this.buildAttributes();if(inputAttrs.type="checkbox",this.checked)inputAttrs.checked="true";if(this.disabled)inputAttrs.disabled="true";let events=this.buildEvents();return{tag:"input",attributes:inputAttrs,events}}}import{HtmlElement as HtmlElement3,HtmlStyle}from"@equantic/runtime";class Flex extends HtmlElement3{direction;justify;align;gap;wrap;render(){let s,attrs=this.buildAttributes(),layoutStyle=new HtmlStyle({display:"flex",flexDirection:this.direction,justifyContent:this.justify,alignItems:this.align,gap:this.gap,flexWrap:this.wrap?"wrap":"noWrap"}),existingStyle=(s=attrs.style)!==void 0?s+"; ":"";return attrs.style=existingStyle+layoutStyle.toCssString(),{tag:"div",attributes:attrs,events:this.buildEvents(),children:this.children.map((c)=>c.render())}}}class Column extends Flex{constructor(props){super(props)}}import{HtmlElement as HtmlElement4}from"@equantic/runtime";class Container extends HtmlElement4{fluid;maxWidth;render(){let s,attrs=this.buildAttributes(),style=["margin-right: auto","margin-left: auto","padding-right: 15px","padding-left: 15px","width: 100%"];if(this.fluid);else if(this.maxWidth)style.push(`max-width: ${this.maxWidth}`);else style.push("max-width: 1320px");let existingStyle=(s=attrs.style)!==void 0?s+"; ":"";return attrs.style=existingStyle+style.join("; "),{tag:"div",attributes:attrs,events:this.buildEvents(),children:this.children.map((c)=>c.render())}}}import{HtmlElement as HtmlElement5}from"@equantic/runtime";class Heading extends HtmlElement5{level;content;constructor(content,level){super();this.content=content,this.level=level}render(){return{tag:`h${Math.min(Math.max(this.level,1),6)}`,attributes:this.buildAttributes(),events:this.buildEvents(),children:[{tag:"#text",textContent:this.content}]}}}class Row extends Flex{constructor(props){super(props)}}import{HtmlElement as HtmlElement6}from"@equantic/runtime";class Text extends HtmlElement6{content;paragraph;constructor(content){super();this.content=content}render(){return{tag:this.paragraph?"p":"span",attributes:this.buildAttributes(),events:this.buildEvents(),children:[{tag:"#text",textContent:this.content}]}}}import{HtmlElement as HtmlElement7}from"@equantic/runtime";class TextInput extends HtmlElement7{type;value;placeholder;disabled;readOnly;required;name;maxLength;autoComplete;onChange;onInput;render(){let attrs=this.buildAttributes();if(attrs.type=this.type,attrs.value=this.value,this.placeholder!==null)attrs.placeholder=this.placeholder;if(this.disabled)attrs.disabled="true";if(this.readOnly)attrs.readonly="true";if(this.required)attrs.required="true";if(this.name!==null)attrs.name=this.name;if(this.maxLength!=null)attrs.maxlength=this.maxLength.toString();if(this.autoComplete!==null)attrs.autocomplete=this.autoComplete;let events=this.buildEvents();if(this.onChange!==null)events.change=this.onChange;if(this.onInput!==null)events.input=this.onInput;return{tag:"input",attributes:attrs,events}}}class TodoList extends StatefulComponent{createState(){return new TodoListState(this)}async getTodos(){return await getServerActionsClient().invoke("TodoList/GetTodos",[])}async addTodo(title){return await getServerActionsClient().invoke("TodoList/AddTodo",[title])}async toggleTodo(id){return await getServerActionsClient().invoke("TodoList/ToggleTodo",[id])}async deleteTodo(id){return await getServerActionsClient().invoke("TodoList/DeleteTodo",[id])}}class TodoListState extends ComponentState{_component;_needsRender=!1;_todos=[];_newTodoTitle="";constructor(component){super();this._component=component}setState(fn){fn(),this._needsRender=!0,this._component._scheduleRender()}onInit(){this.loadTodos()}async loadTodos(){this._todos=await this._component.getTodos(),this.setState(()=>{})}async handleAdd(){if(!this._newTodoTitle||this._newTodoTitle.trim()==="")return;await this._component.addTodo(this._newTodoTitle),this._newTodoTitle="",await this.loadTodos()}async handleToggle(id){await this._component.toggleTodo(id),await this.loadTodos()}async handleDelete(id){await this._component.deleteTodo(id),await this.loadTodos()}build(context){let todoList=new Column({gap:"5px"});for(let todo of this._todos)todoList.children.push(new Row({className:"todo-item",gap:"10px",children:[new Checkbox({checked:todo.isCompleted,onChange:(_)=>{this.handleToggle(todo.id)}}),new Text(todo.title,{className:todo.isCompleted?"completed":""}),new Button({text:"X",className:"btn btn-danger btn-sm",onClick:()=>{this.handleDelete(todo.id)}})]}));return new Container({className:"todo-container",children:[new Heading("eQuantic Todo List",1),new Row({gap:"10px",children:[new TextInput({value:this._newTodoTitle,placeholder:"What needs to be done?",onChange:(val)=>this.setState(()=>this._newTodoTitle=val)}),new Button({text:"Add",className:"btn btn-primary",onClick:()=>{this.handleAdd()}})]}),todoList]})}}export{TodoListState,TodoList};

//# debugId=C5621D7C5D2C20C464756E2164756E21
//# sourceMappingURL=TodoList.js.map

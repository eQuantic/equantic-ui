import{ComponentState,getServerActionsClient,StatefulComponent}from"@equantic/runtime";import{Component}from"@equantic/runtime";class Button extends Component{type;disabled;text;render(){let attrs=this.buildAttributes();if(attrs.type=this.type,this.disabled)attrs.disabled="true";let children=this.children.some()?this.children.map((c)=>c.render()):this.text!==null?[this.htmlNode.text(this.text)]:[];return{tag:"button",attributes:attrs,events:this.buildEvents(),children}}}import{Component as Component2}from"@equantic/runtime";class Checkbox extends Component2{checked;onChange;disabled;render(){let inputAttrs=this.buildAttributes();if(inputAttrs.type="checkbox",this.checked)inputAttrs.checked="true";if(this.disabled)inputAttrs.disabled="true";let events=this.buildEvents();return{tag:"input",attributes:inputAttrs,events}}}import{Component as Component3}from"@equantic/runtime";class Column extends Component3{render(){return{tag:"div",attributes:{},events:{},children:[]}}}import{Component as Component4}from"@equantic/runtime";class Container extends Component4{fluid;maxWidth;render(){let attrs=this.buildAttributes(),style=["margin-right: auto","margin-left: auto","padding-right: 15px","padding-left: 15px","width: 100%"];if(this.fluid);else if(this.maxWidth)style.push(`max-width: ${this.maxWidth}`);else style.push("max-width: 1320px");let existingStyle=attrs.style?s+"; ":"";return attrs.style=existingStyle+style.join("; "),{tag:"div",attributes:attrs,events:this.buildEvents(),children:this.children.map((c)=>c.render())}}}import{Component as Component5}from"@equantic/runtime";class Heading extends Component5{level;content;render(){return{tag:`h${Math.min(Math.max(this.level,1),6)}`,attributes:this.buildAttributes(),events:this.buildEvents(),children:[this.htmlNode.text(this.content)]}}}import{Component as Component6}from"@equantic/runtime";class Row extends Component6{render(){return{tag:"div",attributes:{},events:{},children:[]}}}import{Component as Component7}from"@equantic/runtime";class Text extends Component7{content;paragraph;render(){return{tag:this.paragraph?"p":"span",attributes:this.buildAttributes(),events:this.buildEvents(),children:[this.htmlNode.text(this.content)]}}}import{Component as Component8}from"@equantic/runtime";class TextInput extends Component8{type;value;placeholder;disabled;readOnly;required;name;maxLength;autoComplete;onChange;onInput;render(){let attrs=this.buildAttributes();if(attrs.type=this.type,attrs.value=this.value,this.placeholder!==null)attrs.placeholder=this.placeholder;if(this.disabled)attrs.disabled="true";if(this.readOnly)attrs.readonly="true";if(this.required)attrs.required="true";if(this.name!==null)attrs.name=this.name;if(this.maxLength!=null)attrs.maxlength=this.maxLength.toString();if(this.autoComplete!==null)attrs.autocomplete=this.autoComplete;let events=this.buildEvents();if(this.onChange!==null)events.change=this.onChange;if(this.onInput!==null)events.input=this.onInput;return{tag:"input",attributes:attrs,events}}}class TodoList extends StatefulComponent{createState(){return new TodoListState(this)}async getTodos(){return await getServerActionsClient().invoke("TodoList/GetTodos",[])}async addTodo(title){return await getServerActionsClient().invoke("TodoList/AddTodo",[title])}async toggleTodo(id){return await getServerActionsClient().invoke("TodoList/ToggleTodo",[id])}async deleteTodo(id){return await getServerActionsClient().invoke("TodoList/DeleteTodo",[id])}}class TodoListState extends ComponentState{_component;_needsRender=!1;_todos=[];_newTodoTitle="";constructor(component){super();this._component=component}setState(fn){fn(),this._needsRender=!0,this._component._scheduleRender()}onInit(){this.loadTodos()}async loadTodos(){this._todos=await this._component.getTodos(),this.setState(()=>{})}async handleAdd(){if(!this._newTodoTitle||this._newTodoTitle.trim()==="")return;await this._component.addTodo(this._newTodoTitle),this._newTodoTitle="",await this.loadTodos()}async handleToggle(id){await this._component.toggleTodo(id),await this.loadTodos()}async handleDelete(id){await this._component.deleteTodo(id),await this.loadTodos()}build(context){let todoList=new Column({gap:"5px"});for(let todo of this._todos)todoList.children.push(new Row({className:"todo-item",gap:"10px",children:[new Checkbox({checked:todo.isCompleted,onChange:(_)=>{this.handleToggle(todo.id)}}),new Text(todo.title,{className:todo.isCompleted?"completed":""}),new Button({text:"X",className:"btn btn-danger btn-sm",onClick:()=>{this.handleDelete(todo.id)}})]}));return new Container({className:"todo-container",children:[new Heading("eQuantic Todo List",1),new Row({gap:"10px",children:[new TextInput({value:this._newTodoTitle,placeholder:"What needs to be done?",onChange:(val)=>this.setState(()=>this._newTodoTitle=val)}),new Button({text:"Add",className:"btn btn-primary",onClick:()=>{this.handleAdd()}})]}),todoList]})}}export{TodoListState,TodoList};

//# debugId=C7C6B21119C7659664756E2164756E21
//# sourceMappingURL=TodoList.js.map

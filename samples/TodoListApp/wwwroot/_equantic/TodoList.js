import{Box,Button,Card,Checkbox,Container,Drawer,Heading,Modal,Text,TextInput}from"./TodoList-h5nyrzv0.js";import{ComponentState,format,getServerActionsClient,StatefulComponent}from"@equantic/runtime";class TodoList extends StatefulComponent{createState(){return new TodoListState(this)}async getTodos(){return await getServerActionsClient().invoke("TodoList/GetTodos",[])}async addTodo(title){return await getServerActionsClient().invoke("TodoList/AddTodo",[title])}async toggleTodo(id){return await getServerActionsClient().invoke("TodoList/ToggleTodo",[id])}async deleteTodo(id){return await getServerActionsClient().invoke("TodoList/DeleteTodo",[id])}async updateTodo(id,title){return await getServerActionsClient().invoke("TodoList/UpdateTodo",[id,title])}async clearCompleted(){return await getServerActionsClient().invoke("TodoList/ClearCompleted",[])}}class TodoListState extends ComponentState{_component;_needsRender=!1;_todos=[];_newTodoTitle="";_currentFilter="all";_isEditing=!1;_editingId=null;_editingTitle="";_isDrawerOpen=!1;constructor(component){super();this._component=component}setState(fn){fn(),this._needsRender=!0,this._component._scheduleRender()}onInit(){if(this._todos.length===0)try{this._todos=this._component.getTodos().getAwaiter().getResult()}catch{}}onInit(){if(this._todos.length===0)this.loadTodos()}async loadTodos(){this._todos=await this._component.getTodos(),this.setState(()=>{})}async handleAdd(){if(!this._newTodoTitle||!this._newTodoTitle.trim())return;await this._component.addTodo(this._newTodoTitle),this._newTodoTitle="",await this.loadTodos()}async handleToggle(id){await this._component.toggleTodo(id),await this.loadTodos()}async handleDelete(id){await this._component.deleteTodo(id),await this.loadTodos()}async handleClearCompleted(){await this._component.clearCompleted(),await this.loadTodos()}openEdit(todo){this.setState(()=>{this._isEditing=!0,this._editingId=todo.id,this._editingTitle=todo.title})}async saveEdit(){if(!this._editingTitle||!this._editingTitle.trim())return;await this._component.updateTodo(this._editingId,this._editingTitle),this.setState(()=>{this._isEditing=!1}),await this.loadTodos()}createFilterButton(filter,label){let isActive=this._currentFilter===filter;return new Button({text:label,variant:isActive?"primary":"ghost",className:"flex-1 px-3 py-1.5 text-xs font-semibold rounded-md transition-all "+(isActive?"shadow-sm":"hover:bg-gray-200 dark:hover:bg-zinc-700/50"),onClick:()=>{this.setState(()=>{this._currentFilter=filter})}})}build(context){let filteredTodos=(()=>{let _s=this._currentFilter;if(_s==="active")return this._todos.filter((t)=>!t.isCompleted);if(_s==="completed")return this._todos.filter((t)=>t.isCompleted);return this._todos})(),todoList=new Box({className:"flex flex-col gap-[5px]"});if(!(filteredTodos.length>0))todoList.children.push(new Box({className:"py-8 text-center",children:[new Text("No tasks found in this view.",{variant:"custom",className:"text-gray-400"})]}));else for(let todo of filteredTodos)todoList.children.push(new Box({className:"flex flex-row items-center p-2 border-b border-gray-100 dark:border-zinc-700 bg-white dark:bg-zinc-800 rounded transition-all hover:bg-gray-50 dark:hover:bg-zinc-700/50 group gap-[10px]",children:[new Checkbox({checked:todo.isCompleted,onChange:(_)=>{this.handleToggle(todo.id)}}),new Text(todo.title,{className:"flex-1 transition-all",variant:todo.isCompleted?"custom":"primary"}),new Box({className:"flex flex-row gap-[4px] opacity-0 group-hover:opacity-100 transition-opacity",children:[new Button({text:"Edit",variant:"ghost",className:"px-2 py-1 text-xs text-blue-600 hover:text-blue-700",onClick:()=>{this.openEdit(todo)}}),new Button({text:"Delete",variant:"ghost",className:"px-2 py-1 text-xs text-red-600 hover:text-red-700",onClick:()=>{this.handleDelete(todo.id)}})]})]}));return new Box({className:"min-h-screen bg-gray-50 dark:bg-zinc-900 p-8 grid place-items-center",children:[new Box({className:"absolute top-4 right-4",children:[new Button({text:`⚙️ Settings (${format(new Date,"HH:mm")})`,variant:"outline",className:"bg-white dark:bg-zinc-800 text-sm",onClick:()=>{this.setState(()=>{this._isDrawerOpen=!0})}})]}),new Card({width:"w-full max-w-md",shadow:"large",header:new Box({className:"w-full flex flex-col gap-[15px]",children:[new Box({className:"w-full flex flex-row items-center justify-between",children:[new Heading("Tasks",2),new Text(`${format(this._todos.filter((t)=>!t.isCompleted).length,"N0")} remaining`,{variant:"custom",className:"text-gray-400"})]}),new Box({className:"flex flex-row gap-[8px] bg-gray-100/50 dark:bg-zinc-900/30 p-1 rounded-lg",children:[this.createFilterButton("all","All"),this.createFilterButton("active","Active"),this.createFilterButton("completed","Completed")]})]}),body:new Box({className:"flex flex-col gap-[20px]",children:[new Box({className:"flex flex-row gap-[10px]",children:[new TextInput({value:this._newTodoTitle,placeholder:"New task...",className:"flex-1",onInput:(val)=>{this.setState(()=>{this._newTodoTitle=val})}}),new Button({text:"Add",variant:"primary",onClick:()=>{this.handleAdd()}})]}),todoList]}),footer:this._todos.some((t)=>t.isCompleted)?new Box({className:"flex flex-row justify-center",children:[new Button({text:"Clear Completed",variant:"link",className:"text-xs uppercase font-semibold tracking-wider text-red-500 hover:text-red-700",onClick:()=>{this.handleClearCompleted()}})]}):null}),new Modal({isOpen:this._isEditing,title:"Edit Task",onClose:()=>{this.setState(()=>{this._isEditing=!1})},body:new Box({className:"flex flex-col gap-[10px]",children:[new Text("Update the task title:",{variant:"custom",className:"text-gray-400"}),new TextInput({value:this._editingTitle,onInput:(val)=>{this.setState(()=>{this._editingTitle=val})}})]}),footer:new Box({className:"flex flex-row gap-[10px]",children:[new Button({text:"Cancel",variant:"ghost",onClick:()=>{this.setState(()=>{this._isEditing=!1})}}),new Button({text:"Save Changes",variant:"primary",onClick:()=>{this.saveEdit()}})]})}),new Drawer({isOpen:this._isDrawerOpen,side:"right",onClose:()=>{this.setState(()=>{this._isDrawerOpen=!1})},content:new Box({className:"flex flex-col gap-[20px]",children:[new Heading("Settings",3,{className:"mb-4"}),new Text("Theme preferences and other settings will go here.",{variant:"ghost"}),new Box({className:"p-3 rounded-lg bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800",children:[new Text("eQuantic.UI is now running with Bun + Tailwind 100%!",{variant:"custom",className:"text-sm text-green-800 dark:text-green-300 font-medium"})]}),new Container({className:"mt-auto pt-8 border-t border-gray-100 dark:border-zinc-800",children:[new Button({text:"Back to List",variant:"secondary",className:"w-full",onClick:()=>{this.setState(()=>{this._isDrawerOpen=!1})}})]})]})})]})}}export{TodoListState,TodoList};

//# debugId=8083F642451DAE9B64756E2164756E21
//# sourceMappingURL=TodoList.js.map
